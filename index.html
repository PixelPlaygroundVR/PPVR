<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pixel Playgrounds AR Visualizer</title>
    <!-- A-Frame for AR -->
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <!-- AR.js for marker-based AR -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <!-- EmailJS for email confirmation -->
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@2/dist/email.min.js"></script>
    <style>
        /* Cyberpunk Styling */
        body {
            background-color: #000;
            color: #0f0;
            font-family: 'Courier New', monospace;
            margin: 0;
            padding: 0;
        }
        #sidebar {
            position: fixed;
            top: 0;
            left: 0;
            width: 200px;
            height: 100%;
            background: #111;
            color: #0f0;
            padding: 20px;
            box-shadow: 2px 0 5px #0f0;
        }
        #sidebar h2 {
            color: #0ff;
            text-shadow: 0 0 5px #0ff;
            margin: 0 0 20px;
        }
        #sidebar nav ul {
            list-style: none;
            padding: 0;
        }
        #sidebar nav ul li {
            margin: 15px 0;
        }
        #sidebar nav ul li a {
            color: #0f0;
            text-decoration: none;
            cursor: pointer;
        }
        #sidebar nav ul li a:hover {
            text-shadow: 0 0 5px #0f0;
        }
        #content {
            margin-left: 220px;
            padding: 20px;
        }
        section {
            display: none;
        }
        section.active {
            display: block;
        }
        h1 {
            color: #0ff;
            text-shadow: 0 0 5px #0ff;
        }
        select, button {
            background-color: #111;
            color: #0f0;
            border: 1px solid #0f0;
            padding: 8px;
            margin: 5px;
            font-size: 16px;
            cursor: pointer;
        }
        button:hover {
            background-color: #0f0;
            color: #000;
        }
        #orderForm, #cart, #checkout {
            margin-top: 20px;
            background-color: #111;
            padding: 15px;
            border: 1px solid #0ff;
        }
        input {
            background-color: #111;
            color: #0f0;
            border: 1px solid #0f0;
            padding: 5px;
            margin: 5px 0;
            width: 80%;
            max-width: 300px;
        }
        label {
            display: block;
            margin: 10px 0 5px;
        }
        a-scene {
            height: 400px;
            width: 100%;
            border: 1px solid #0ff;
        }
        .product {
            border: 1px solid #0f0;
            padding: 10px;
            margin: 10px 0;
            background-color: #111;
        }
    </style>
</head>
<body>
    <!-- Sidebar Navigation -->
    <div id="sidebar">
        <h2>Pixel Playgrounds</h2>
        <nav>
            <ul>
                <li><a onclick="showSection('home')">Home</a></li>
                <li><a onclick="showSection('streamers')">Streamers</a></li>
                <li><a onclick="showSection('gamers')">Gamers</a></li>
                <li><a onclick="showSection('podcasters')">Podcasters</a></li>
                <li><a onclick="showSection('shop')">Shop</a></li>
            </ul>
        </nav>
        <footer>
            <p>&copy; 2023 Pixel Playgrounds</p>
        </footer>
    </div>

    <!-- Main Content -->
    <div id="content">
        <!-- Home Section with AR Visualizer -->
        <section id="home" class="active">
            <h1>Pixel Playgrounds</h1>
            <p>Visualize studio gear in AR. Select a category and tier below.</p>
            <label for="category">Category:</label>
            <select id="category">
                <option value="streamers">Streamers</option>
                <option value="gamers">Gamers</option>
                <option value="podcasters">Podcasters</option>
            </select>
            <label for="tier">Tier:</label>
            <select id="tier">
                <option value="1">Noob</option>
                <option value="2">Beginner</option>
                <option value="3">Novice</option>
                <option value="4">Intermediate</option>
                <option value="5">Advanced</option>
                <option value="6">Expert</option>
                <option value="7">Master</option>
                <option value="8">Grandmaster</option>
                <option value="9">Legend</option>
                <option value="10">Rank 1</option>
            </select>
            <button onclick="updateEquipment()">Update Equipment</button>
            <button onclick="showOrderForm()">Order Package</button>
            <a-scene embedded arjs="sourceType: webcam; detectionMode: mono_and_matrix; matrixCodeType: 3x3;">
                <a-assets>
                    <!-- Preload .gltf files here when available -->
                </a-assets>
                <a-marker preset="hiro">
                    <a-entity id="equipment" position="0 0 0"></a-entity>
                </a-marker>
                <a-entity camera position="0 1.6 0"></a-entity>
            </a-scene>
            <p>Point your camera at the Hiro marker to see the gear.</p>
        </section>

        <!-- Streamers Section -->
        <section id="streamers">
            <h1>Streamers</h1>
            <p>Select a tier on the Home page to visualize Streamer packages.</p>
        </section>

        <!-- Gamers Section -->
        <section id="gamers">
            <h1>Gamers</h1>
            <p>Select a tier on the Home page to visualize Gamer packages.</p>
        </section>

        <!-- Podcasters Section -->
        <section id="podcasters">
            <h1>Podcasters</h1>
            <p>Select a tier on the Home page to visualize Podcaster packages.</p>
        </section>

        <!-- Shop Section -->
        <section id="shop">
            <h1>Shop</h1>
            <div id="product-list"></div>
            <button onclick="viewCart()">View Cart</button>
        </section>

        <!-- Cart Section -->
        <section id="cart">
            <h1>Cart</h1>
            <div id="cart-items"></div>
            <button onclick="showCheckout()">Proceed to Checkout</button>
        </section>

        <!-- Checkout Section -->
        <section id="checkout">
            <h1>Checkout</h1>
            <form id="checkout-form">
                <label for="name">Name:</label>
                <input type="text" id="name" required>
                <label for="email">Email:</label>
                <input type="email" id="email" required>
                <label for="installDate">Installation Date:</label>
                <input type="date" id="installDate" required>
                <label for="installation">Add Installation ($100):</label>
                <input type="checkbox" id="installation">
                <button type="submit">Submit Order</button>
            </form>
        </section>

        <!-- Order Form for Packages -->
        <div id="orderForm" style="display: none;">
            <h2>Order Package</h2>
            <form id="packageOrderForm">
                <label for="packageName">Name:</label>
                <input type="text" id="packageName" required>
                <label for="packageEmail">Email:</label>
                <input type="email" id="packageEmail" required>
                <label for="packageInstallDate">Installation Date:</label>
                <input type="date" id="packageInstallDate" required>
                <button type="submit">Submit Order</button>
            </form>
        </div>
    </div>

    <script>
        // Initialize EmailJS (replace with your EmailJS User ID)
        emailjs.init("YOUR_EMAILJS_USER_ID");

        // Equipment Data with Placeholder .gltf URLs
        const equipmentData = [
            // Streamers Equipment
            { id: 1, name: "Basic Webcam", description: "720p webcam.", price: 50, modelUrl: "path/to/basic_webcam.gltf", category: "streamers", tiers: [1, 2] },
            { id: 2, name: "USB Mic", description: "Entry-level mic.", price: 30, modelUrl: "path/to/usb_mic.gltf", category: "streamers", tiers: [1] },
            { id: 3, name: "HD Webcam", description: "1080p webcam.", price: 100, modelUrl: "path/to/hd_webcam.gltf", category: "streamers", tiers: [2, 3] },
            { id: 4, name: "Condenser Mic", description: "Clear audio mic.", price: 80, modelUrl: "path/to/condenser_mic.gltf", category: "streamers", tiers: [2, 3, 4] },
            { id: 5, name: "Ring Light", description: "Basic lighting.", price: 40, modelUrl: "path/to/ring_light.gltf", category: "streamers", tiers: [2, 3, 4] },
            { id: 6, name: "4K Camera", description: "Pro streaming camera.", price: 1000, modelUrl: "path/to/4k_camera.gltf", category: "streamers", tiers: [9, 10] },
            { id: 7, name: "Pro Mic", description: "Studio-grade mic.", price: 500, modelUrl: "path/to/pro_mic.gltf", category: "streamers", tiers: [8, 9, 10] },
            { id: 8, name: "Studio Lights", description: "Full lighting kit.", price: 800, modelUrl: "path/to/studio_lights.gltf", category: "streamers", tiers: [10] },
            // Gamers Equipment
            { id: 9, name: "Basic Mouse", description: "Entry-level mouse.", price: 20, modelUrl: "path/to/basic_mouse.gltf", category: "gamers", tiers: [1] },
            { id: 10, name: "Basic Keyboard", description: "Simple keyboard.", price: 30, modelUrl: "path/to/basic_keyboard.gltf", category: "gamers", tiers: [1, 2] },
            { id: 11, name: "Gaming Mouse", description: "RGB mouse.", price: 60, modelUrl: "path/to/gaming_mouse.gltf", category: "gamers", tiers: [3, 4, 5] },
            { id: 12, name: "Mechanical Keyboard", description: "Clicky keys.", price: 100, modelUrl: "path/to/mech_keyboard.gltf", category: "gamers", tiers: [4, 5, 6] },
            { id: 13, name: "144Hz Monitor", description: "Smooth display.", price: 200, modelUrl: "path/to/144hz_monitor.gltf", category: "gamers", tiers: [6, 7, 8] },
            { id: 14, name: "Pro Gaming Chair", description: "Ergonomic chair.", price: 300, modelUrl: "path/to/gaming_chair.gltf", category: "gamers", tiers: [10] },
            // Podcasters Equipment
            { id: 15, name: "Basic Mic", description: "Starter mic.", price: 40, modelUrl: "path/to/basic_mic.gltf", category: "podcasters", tiers: [1, 2] },
            { id: 16, name: "Headphones", description: "Basic audio.", price: 50, modelUrl: "path/to/headphones.gltf", category: "podcasters", tiers: [1, 2, 3] },
            { id: 17, name: "Audio Interface", description: "Mixing audio.", price: 150, modelUrl: "path/to/audio_interface.gltf", category: "podcasters", tiers: [4, 5, 6] },
            { id: 18, name: "Studio Mic", description: "High-quality mic.", price: 300, modelUrl: "path/to/studio_mic.gltf", category: "podcasters", tiers: [7, 8, 9, 10] },
            { id: 19, name: "Mixer", description: "Multi-channel mixer.", price: 400, modelUrl: "path/to/mixer.gltf", category: "podcasters", tiers: [10] }
        ];

        // Complete Tier Packages (equipment IDs)
        const packages = {
            streamers: {
                1: [1, 2],                  // Noob: Basic Webcam, USB Mic
                2: [3, 4, 5],              // Beginner: HD Webcam, Condenser Mic, Ring Light
                3: [3, 4, 5],              // Novice: Same as Beginner (expand as needed)
                4: [3, 4, 5],              // Intermediate: Same (add more gear)
                5: [3, 4, 5],              // Advanced: Same
                6: [3, 4, 5],              // Expert: Same
                7: [3, 4, 5],              // Master: Same
                8: [3, 4, 5, 7],           // Grandmaster: Add Pro Mic
                9: [6, 7],                 // Legend: 4K Camera, Pro Mic
                10: [6, 7, 8]              // Rank 1: 4K Camera, Pro Mic, Studio Lights
            },
            gamers: {
                1: [9, 10],                // Noob: Basic Mouse, Basic Keyboard
                2: [9, 10],                // Beginner: Same
                3: [11, 10],               // Novice: Gaming Mouse, Basic Keyboard
                4: [11, 12],               // Intermediate: Gaming Mouse, Mechanical Keyboard
                5: [11, 12],               // Advanced: Same
                6: [11, 12, 13],           // Expert: Add 144Hz Monitor
                7: [11, 12, 13],           // Master: Same
                8: [11, 12, 13],           // Grandmaster: Same
                9: [11, 12, 13],           // Legend: Same
                10: [11, 12, 13, 14]       // Rank 1: Add Pro Gaming Chair
            },
            podcasters: {
                1: [15, 16],               // Noob: Basic Mic, Headphones
                2: [15, 16],               // Beginner: Same
                3: [15, 16],               // Novice: Same
                4: [15, 16, 17],           // Intermediate: Add Audio Interface
                5: [15, 16, 17],           // Advanced: Same
                6: [15, 16, 17],           // Expert: Same
                7: [18, 16, 17],           // Master: Studio Mic, Headphones, Audio Interface
                8: [18, 16, 17],           // Grandmaster: Same
                9: [18, 16, 17],           // Legend: Same
                10: [18, 16, 17, 19]       // Rank 1: Add Mixer
            }
        };

        // Cart Management
        let cart = JSON.parse(localStorage.getItem('cart')) || [];

        // Show Section
        function showSection(sectionId) {
            document.querySelectorAll('#content > section').forEach(section => {
                section.classList.remove('active');
                if (section.id === sectionId) section.classList.add('active');
            });
            if (sectionId === 'shop') populateShop();
            if (sectionId === 'cart') viewCart();
            document.getElementById('orderForm').style.display = 'none';
        }

        // Update AR Equipment
        function updateEquipment() {
            const category = document.getElementById('category').value;
            const tier = document.getElementById('tier').value;
            const packageIds = packages[category][tier] || [];
            const equipmentEntity = document.getElementById('equipment');
            equipmentEntity.innerHTML = '';
            packageIds.forEach((id, index) => {
                const item = equipmentData.find(e => e.id === id);
                // Placeholder box (replace with .gltf when available)
                const entity = document.createElement('a-box');
                entity.setAttribute('position', `${index * 0.5} 0 0`);
                entity.setAttribute('scale', '0.2 0.2 0.2');
                entity.setAttribute('color', '#f00');
                equipmentEntity.appendChild(entity);
                // Uncomment to use .gltf:
                // const entity = document.createElement('a-entity');
                // entity.setAttribute('gltf-model', item.modelUrl);
                // entity.setAttribute('position', `${index * 0.5} 0 0`);
                // entity.setAttribute('scale', '0.5 0.5 0.5');
                // equipmentEntity.appendChild(entity);
            });
        }

        // Show Order Form
        function showOrderForm() {
            document.getElementById('orderForm').style.display = 'block';
        }

        // Populate Shop
        function populateShop() {
            const productList = document.getElementById('product-list');
            productList.innerHTML = '';
            equipmentData.forEach(item => {
                const div = document.createElement('div');
                div.className = 'product';
                div.innerHTML = `
                    <h3>${item.name}</h3>
                    <p>${item.description}</p>
                    <p>Price: $${item.price}</p>
                    <button onclick="addToCart(${item.id})">Add to Cart</button>
                `;
                productList.appendChild(div);
            });
        }

        // Add to Cart
        function addToCart(id) {
            cart.push(id);
            localStorage.setItem('cart', JSON.stringify(cart));
            alert(`${equipmentData.find(e => e.id === id).name} added to cart!`);
        }

        // View Cart
        function viewCart() {
            showSection('cart');
            const cartItems = document.getElementById('cart-items');
            cartItems.innerHTML = '';
            let total = 0;
            cart.forEach(id => {
                const item = equipmentData.find(e => e.id === id);
                total += item.price;
                const div = document.createElement('div');
                div.textContent = `${item.name} - $${item.price}`;
                cartItems.appendChild(div);
            });
            const totalDiv = document.createElement('div');
            totalDiv.textContent = `Total: $${total}`;
            cartItems.appendChild(totalDiv);
        }

        // Show Checkout
        function showCheckout() {
            showSection('checkout');
        }

        // Package Order Submission
        document.getElementById('packageOrderForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const name = document.getElementById('packageName').value;
            const email = document.getElementById('packageEmail').value;
            const installDate = document.getElementById('packageInstallDate').value;
            const category = document.getElementById('category').value;
            const tier = document.getElementById('tier').value;
            const packageItems = packages[category][tier].map(id => equipmentData.find(e => e.id === id).name).join(', ');
            const totalPrice = packages[category][tier].reduce((sum, id) => sum + equipmentData.find(e => e.id === id).price, 0);
            const orderDetails = {
                name, email, installDate, category, tier, packageItems, totalPrice
            };
            emailjs.send("YOUR_SERVICE_ID", "YOUR_TEMPLATE_ID", orderDetails)
                .then(() => {
                    alert('Order submitted! Check your email.');
                    document.getElementById('orderForm').style.display = 'none';
                    document.getElementById('packageOrderForm').reset();
                }, () => alert('Order failed. Try again.'));
        });

        // Checkout Submission
        document.getElementById('checkout-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const installDate = document.getElementById('installDate').value;
            const installation = document.getElementById('installation').checked;
            const items = cart.map(id => equipmentData.find(e => e.id === id).name).join(', ');
            let total = cart.reduce((sum, id) => sum + equipmentData.find(e => e.id === id).price, 0);
            total += installation ? 100 : 0;
            const orderDetails = { name, email, installDate, installation: installation ? 'Yes' : 'No', items, total };
            emailjs.send("YOUR_SERVICE_ID", "YOUR_TEMPLATE_ID", orderDetails)
                .then(() => {
                    alert('Order submitted! Check your email.');
                    cart = [];
                    localStorage.removeItem('cart');
                    showSection('home');
                }, () => alert('Order failed. Try again.'));
        });

        // Initialize
        updateEquipment();
    </script>
</body>
</html>