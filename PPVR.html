<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pixel Playgrounds AR Visualizer</title>
    <!-- A-Frame for AR -->
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <!-- AR.js for marker-based AR -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <!-- EmailJS for email confirmation -->
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@2/dist/email.min.js"></script>
    <style>
        /* Cyberpunk Styling */
        body {
            background-color: #000;
            color: #0f0;
            font-family: 'Courier New', monospace;
            text-align: center;
            margin: 0;
            padding: 20px;
        }
        h1 {
            color: #0ff;
            text-shadow: 0 0 5px #0ff;
            margin-bottom: 20px;
        }
        select, button {
            background-color: #111;
            color: #0f0;
            border: 1px solid #0f0;
            padding: 10px;
            margin: 5px;
            font-size: 16px;
            cursor: pointer;
        }
        button:hover {
            background-color: #0f0;
            color: #000;
        }
        #orderForm {
            display: none;
            margin-top: 20px;
            background-color: #111;
            padding: 20px;
            border: 1px solid #0ff;
        }
        input {
            background-color: #111;
            color: #0f0;
            border: 1px solid #0f0;
            padding: 5px;
            margin: 5px;
            width: 80%;
            max-width: 300px;
        }
        label {
            display: block;
            margin: 10px 0 5px;
        }
        /* AR Scene */
        a-scene {
            height: 400px;
            width: 100%;
            border: 1px solid #0ff;
        }
    </style>
</head>
<body>
    <h1>Pixel Playgrounds AR Visualizer</h1>

    <!-- Category and Tier Selection -->
    <label for="category">Category:</label>
    <select id="category">
        <option value="streamers">Streamers</option>
        <option value="gamers">Gamers</option>
        <option value="podcasters">Podcasters</option>
    </select>

    <label for="tier">Tier:</label>
    <select id="tier">
        <option value="1">Noob</option>
        <option value="2">Beginner</option>
        <option value="3">Novice</option>
        <option value="4">Intermediate</option>
        <option value="5">Advanced</option>
        <option value="6">Expert</option>
        <option value="7">Master</option>
        <option value="8">Grandmaster</option>
        <option value="9">Legend</option>
        <option value="10">Rank 1</option>
    </select>

    <button onclick="updateEquipment()">Update Equipment</button>
    <button onclick="showOrderForm()">Order this Package</button>

    <!-- AR Scene -->
    <a-scene embedded arjs="sourceType: webcam; detectionMode: mono_and_matrix; matrixCodeType: 3x3;">
        <a-marker preset="hiro">
            <a-entity id="equipment" position="0 0 0"></a-entity>
        </a-marker>
        <a-entity camera position="0 1.6 0"></a-entity>
    </a-scene>

    <!-- Order Form -->
    <div id="orderForm">
        <h2>Order Form</h2>
        <form id="orderFormElem">
            <label for="name">Name:</label>
            <input type="text" id="name" required>
            <label for="email">Email:</label>
            <input type="email" id="email" required>
            <label for="installDate">Installation Date:</label>
            <input type="date" id="installDate" required>
            <button type="submit">Submit Order</button>
        </form>
    </div>

    <script>
        // Initialize EmailJS (replace with your EmailJS user ID)
        emailjs.init("YOUR_USER_ID");

        // Equipment Configurations (scaled to real-world sizes, 1 unit = 1 meter)
        const equipment = {
            streamers: {
                1: [{ primitive: 'box', scale: '0.2 0.2 0.2', color: 'red' }], // Camera (20cm cube)
                2: [{ primitive: 'box', scale: '0.25 0.25 0.25', color: 'orange' }, { primitive: 'cylinder', scale: '0.05 0.3 0.05', color: 'green' }], // Camera + Mic Stand
                3: [{ primitive: 'box', scale: '0.3 0.3 0.3', color: 'yellow' }, { primitive: 'cylinder', scale: '0.06 0.35 0.06', color: 'blue' }], 
                4: [{ primitive: 'box', scale: '0.35 0.35 0.35', color: 'green' }, { primitive: 'cylinder', scale: '0.07 0.4 0.07', color: 'purple' }],
                5: [{ primitive: 'box', scale: '0.4 0.4 0.4', color: 'blue' }, { primitive: 'cylinder', scale: '0.08 0.45 0.08', color: 'pink' }],
                6: [{ primitive: 'box', scale: '0.45 0.45 0.45', color: 'purple' }, { primitive: 'cylinder', scale: '0.09 0.5 0.09', color: 'cyan' }],
                7: [{ primitive: 'box', scale: '0.5 0.5 0.5', color: 'pink' }, { primitive: 'cylinder', scale: '0.1 0.55 0.1', color: 'magenta' }],
                8: [{ primitive: 'box', scale: '0.55 0.55 0.55', color: 'cyan' }, { primitive: 'cylinder', scale: '0.11 0.6 0.11', color: 'white' }],
                9: [{ primitive: 'box', scale: '0.6 0.6 0.6', color: 'magenta' }, { primitive: 'cylinder', scale: '0.12 0.65 0.12', color: 'red' }],
                10: [{ primitive: 'box', scale: '0.65 0.65 0.65', color: 'white' }, { primitive: 'cylinder', scale: '0.13 0.7 0.13', color: 'orange' }]
            },
            gamers: {
                1: [{ primitive: 'box', scale: '0.25 0.25 0.25', color: 'red' }], // Monitor (25cm cube)
                2: [{ primitive: 'box', scale: '0.3 0.3 0.3', color: 'orange' }, { primitive: 'box', scale: '0.15 0.1 0.1', color: 'green' }], // Monitor + Keyboard
                3: [{ primitive: 'box', scale: '0.35 0.35 0.35', color: 'yellow' }, { primitive: 'box', scale: '0.16 0.11 0.11', color: 'blue' }],
                4: [{ primitive: 'box', scale: '0.4 0.4 0.4', color: 'green' }, { primitive: 'box', scale: '0.17 0.12 0.12', color: 'purple' }],
                5: [{ primitive: 'box', scale: '0.45 0.45 0.45', color: 'blue' }, { primitive: 'box', scale: '0.18 0.13 0.13', color: 'pink' }],
                6: [{ primitive: 'box', scale: '0.5 0.5 0.5', color: 'purple' }, { primitive: 'box', scale: '0.19 0.14 0.14', color: 'cyan' }],
                7: [{ primitive: 'box', scale: '0.55 0.55 0.55', color: 'pink' }, { primitive: 'box', scale: '0.2 0.15 0.15', color: 'magenta' }],
                8: [{ primitive: 'box', scale: '0.6 0.6 0.6', color: 'cyan' }, { primitive: 'box', scale: '0.21 0.16 0.16', color: 'white' }],
                9: [{ primitive: 'box', scale: '0.65 0.65 0.65', color: 'magenta' }, { primitive: 'box', scale: '0.22 0.17 0.17', color: 'red' }],
                10: [{ primitive: 'box', scale: '0.7 0.7 0.7', color: 'white' }, { primitive: 'box', scale: '0.23 0.18 0.18', color: 'orange' }]
            },
            podcasters: {
                1: [{ primitive: 'cylinder', scale: '0.05 0.2 0.05', color: 'red' }], // Microphone (20cm tall)
                2: [{ primitive: 'cylinder', scale: '0.06 0.25 0.06', color: 'orange' }, { primitive: 'box', scale: '0.15 0.05 0.1', color: 'green' }], // Mic + Stand
                3: [{ primitive: 'cylinder', scale: '0.07 0.3 0.07', color: 'yellow' }, { primitive: 'box', scale: '0.16 0.06 0.11', color: 'blue' }],
                4: [{ primitive: 'cylinder', scale: '0.08 0.35 0.08', color: 'green' }, { primitive: 'box', scale: '0.17 0.07 0.12', color: 'purple' }],
                5: [{ primitive: 'cylinder', scale: '0.09 0.4 0.09', color: 'blue' }, { primitive: 'box', scale: '0.18 0.08 0.13', color: 'pink' }],
                6: [{ primitive: 'cylinder', scale: '0.1 0.45 0.1', color: 'purple' }, { primitive: 'box', scale: '0.19 0.09 0.14', color: 'cyan' }],
                7: [{ primitive: 'cylinder', scale: '0.11 0.5 0.11', color: 'pink' }, { primitive: 'box', scale: '0.2 0.1 0.15', color: 'magenta' }],
                8: [{ primitive: 'cylinder', scale: '0.12 0.55 0.12', color: 'cyan' }, { primitive: 'box', scale: '0.21 0.11 0.16', color: 'white' }],
                9: [{ primitive: 'cylinder', scale: '0.13 0.6 0.13', color: 'magenta' }, { primitive: 'box', scale: '0.22 0.12 0.17', color: 'red' }],
                10: [{ primitive: 'cylinder', scale: '0.14 0.65 0.14', color: 'white' }, { primitive: 'box', scale: '0.23 0.13 0.18', color: 'orange' }]
            }
        };

        let selectedCategory = 'streamers';
        let selectedTier = '1';

        // Update AR scene with selected equipment
        function updateEquipment() {
            selectedCategory = document.getElementById('category').value;
            selectedTier = document.getElementById('tier').value;
            const equipList = equipment[selectedCategory][selectedTier];
            const equipmentEntity = document.getElementById('equipment');
            equipmentEntity.innerHTML = ''; // Clear previous equipment
            equipList.forEach((item, index) => {
                const entity = document.createElement('a-entity');
                entity.setAttribute('geometry', `primitive: ${item.primitive}`);
                entity.setAttribute('material', `color: ${item.color}`);
                entity.setAttribute('scale', item.scale);
                // Space out items horizontally
                entity.setAttribute('position', `${index * 0.5} 0 0`);
                equipmentEntity.appendChild(entity);
            });
        }

        // Show the order form
        function showOrderForm() {
            document.getElementById('orderForm').style.display = 'block';
        }

        // Handle form submission and send email
        document.getElementById('orderFormElem').addEventListener('submit', function(event) {
            event.preventDefault();
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const installDate = document.getElementById('installDate').value;
            const orderDetails = {
                category: selectedCategory,
                tier: selectedTier,
                name: name,
                email: email,
                installDate: installDate
            };
            // Send email via EmailJS (replace with your service and template IDs)
            emailjs.send("YOUR_SERVICE_ID", "YOUR_TEMPLATE_ID", orderDetails)
                .then(function(response) {
                    alert('Order submitted successfully! A confirmation email has been sent.');
                    document.getElementById('orderForm').style.display = 'none';
                    document.getElementById('orderFormElem').reset();
                }, function(error) {
                    alert('Failed to send order. Please try again.');
                });
        });

        // Initialize with default equipment
        updateEquipment();
    </script>
</body>
</html>